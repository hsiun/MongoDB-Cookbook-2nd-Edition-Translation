# 创建测试数据

这个菜谱是关于给本章和本书之后章节的菜谱创建测试数据的。我们将演示使用mongo导入工具是如何导入CSV文件到mongo数据库中的。这是个基础菜谱，如果读者知道数据导入工具；那么他们可以直接从Packt网站（pingcodes.csv）下载CSV文件，并加载他到集合中，然后跳过本菜谱的其余部分。我们将使用默认的`test`数据库，集合将被命名为`postalCodes`。

### 前提条件
这里使用的数据是印度的邮编。从Packt网站下载`pincodes.csv`。这是一个包好39732条记录的CSV文件；导入成功将创建39732条文档。我们需要Mongo服务启动好，并处于运行中。参考参考第一章_单节点MongoDB安装_，安装和启动服务器以获取有关如何启动服务器的说明。服务器应该启动在默认的27017端口等待连接。

### 如何做...
1. 在当前目录，从shell和将被导入的文件执行下面命令：

```
$ mongoimport --type csv -d test -c postalCodes --headerline
--drop pincodes.csv
```

2. 通过在命令行提示符输入`mongo`启动mongo shell。

3. 在shell中执行下面命令：
```
> db.postalCodes.count()
```

### 如何生效...
假设服务已经启动并运行，CSV文件已经下载好并保留在本地文件系统中，这里就是我们执行导入文件的当前目录。让我们一起看下`mongoimport`工具提供的选项和它们的作用：


在所有的选项之后给出的，命令行提示符最后的一个值是文件的名字，`pincodes.csv`。

如果导入执行成功，你将会在控制台看到一些类似于下面的输出：
```
2015-05-19T06:51:54.131+0000 connected to: localhost
2015-05-19T06:51:54.132+0000 dropping: test.postalCodes
2015-05-19T06:51:54.810+0000 imported 39732 documents
```

最终，我们启动mongo shell并找出集合中文档总数目；这个数应该确定是39732，和之前导入日志中的值一致。

> 这个邮政编码是从< https://github.com/
kishorek/India-Codes/>来的。这个数据不是来自官方，也行不够进去，因为它是手动编辑给免费公共使用的。

### 看看其他
_从Mongo shell执行简单查询，投射和分页操作_是关于在导入数据上执行的一些基础查询。